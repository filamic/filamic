{
  "evals": [
    {
      "name": "Generate tests for simple model with accessor",
      "description": "Test that skill correctly generates tests for a model with a custom accessor",
      "input": {
        "model_code": "class User extends Model {\n    protected function fullName(): Attribute {\n        return Attribute::make(\n            get: fn () => $this->first_name . ' ' . $this->last_name,\n        );\n    }\n}",
        "migration": "Schema::create('users', function (Blueprint $table) {\n    $table->id();\n    $table->string('first_name');\n    $table->string('last_name');\n    $table->timestamps();\n});",
        "task": "Generate comprehensive tests for this User model's fullName accessor"
      },
      "expectations": [
        "Test file created at tests/Feature/Models/UserTest.php",
        "Test uses make() for accessor (no DB needed)",
        "Test verifies fullName returns concatenated string",
        "Test covers edge case (empty names, null values)",
        "Test uses Pest it() syntax",
        "Test uses expect() assertions",
        "Test uses fake() instead of $this->faker",
        "Test uses AAA pattern (Arrange, Act, Assert)"
      ]
    },
    {
      "name": "Generate tests for model with scope",
      "description": "Test that skill correctly generates tests for a model with custom scopes",
      "input": {
        "model_code": "class Product extends Model {\n    public function scopeActive($query) {\n        return $query->where('is_active', true);\n    }\n    \n    public function scopeByCategory($query, $category) {\n        return $query->where('category', $category);\n    }\n}",
        "migration": "Schema::create('products', function (Blueprint $table) {\n    $table->id();\n    $table->string('name');\n    $table->string('category');\n    $table->boolean('is_active')->default(false);\n    $table->timestamps();\n});",
        "task": "Generate comprehensive tests for this Product model's scopes"
      },
      "expectations": [
        "Test file created at tests/Feature/Models/ProductTest.php",
        "Test uses create() for scopes (DB needed)",
        "Test for active() scope filters correctly",
        "Test for byCategory() scope with parameter",
        "Test edge case: byCategory with null parameter",
        "Factory audit: factory has is_active boolean field",
        "All tests pass composer test and composer analyse"
      ]
    },
    {
      "name": "Generate tests for model with relationship",
      "description": "Test that skill correctly generates tests for a model with hasMany relationship",
      "input": {
        "model_code": "class Author extends Model {\n    public function books() {\n        return $this->hasMany(Book::class);\n    }\n}",
        "migration": "Schema::create('authors', function (Blueprint $table) {\n    $table->id();\n    $table->string('name');\n    $table->timestamps();\n});",
        "task": "Generate comprehensive tests for this Author model's relationship"
      },
      "expectations": [
        "Test file created at tests/Feature/Models/AuthorTest.php",
        "Test uses create() for relationships",
        "Test verifies relationship count",
        "Test verifies relationship returns correct instance type",
        "Factory audit: creates Book factory if missing",
        "Test edge case: relationship when parent is missing",
        "Test isolation: each test creates own data"
      ]
    },
    {
      "name": "Skip model with no custom logic",
      "description": "Test that skill correctly skips models with no custom logic",
      "input": {
        "model_code": "class Category extends Model {\n}",
        "migration": "Schema::create('categories', function (Blueprint $table) {\n    $table->id();\n    $table->string('name');\n    $table->timestamps();\n});",
        "task": "Evaluate if model should be tested"
      },
      "expectations": [
        "Model Category identified as having no custom logic",
        "Output message: 'Model Category has no custom logic to test. Skipping.'",
        "No test file generated",
        "No error thrown"
      ]
    },
    {
      "name": "Identify Master Data models correctly",
      "description": "Test that skill correctly identifies Master Data models (no belongsTo)",
      "input": {
        "models": [
          {"name": "Category", "has_belongsTo": false, "has_custom_logic": true},
          {"name": "Product", "has_belongsTo": true, "has_custom_logic": true},
          {"name": "SchoolYear", "has_belongsTo": false, "has_custom_logic": true}
        ],
        "task": "Identify which models are Master Data models"
      },
      "expectations": [
        "Category identified as Master Data (no belongsTo)",
        "Product NOT identified as Master Data (has belongsTo)",
        "SchoolYear identified as Master Data (no belongsTo)",
        "Ask user for confirmation before proceeding"
      ]
    }
  ]
}
