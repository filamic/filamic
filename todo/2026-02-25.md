# TODO — 2026-02-25

## Tasks

- [ ] **Create Pest test skill** — Write `.claude/commands/create-test.md` so we have a reusable slash command for generating model and resource tests following the project's AAA pattern.

- [ ] **Update SchoolYear & SchoolTerm tests** — AcademicPeriod changes have shifted test expectations. Review both test files, align with current model behavior, and ensure all cache + student sync assertions are up to date.

- [ ] **Update Student & StudentEnrollment tests** — Tests flagged as outdated in the old roadmap. Align with current `syncActiveStatus`, `currentEnrollment`, and enrollment status logic. Add missing edge cases.

- [ ] **Add Student status enum** — Implement `StudentStatusEnum` with values: `ACTIVE`, `ALUMNI`, `TRANSFERRED`. Add `status` column to students table via migration, update model casts, factory, and Filament resource filter. Keep `is_active` as the derived computed truth (enrollment source of truth), `status` is the human-facing label.

- [ ] **Implement Middleware Readiness Check** — Create middleware that verifies an active `SchoolYear` AND `SchoolTerm` exist before allowing access to any core feature route. Redirect to a "setup required" page if not. Register in the relevant panel middleware stack.

## Notes

- Branch: `add-finance-module` (current). If adding student status, consider whether it needs its own branch.
- Run `composer analyse && composer test` before any commit.
- Ask before creating new migrations — check if existing ones can be amended (dev only).
